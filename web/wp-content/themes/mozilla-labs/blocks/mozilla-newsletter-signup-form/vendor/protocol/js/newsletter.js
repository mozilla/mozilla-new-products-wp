!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.MzpNewsletter=t():e.MzpNewsletter=t()}(self,(function(){return e={287:function(e){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}var r,o="Country not selected",n="Invalid email address",c="Language not selected",l="Terms not checked",a="Newsletter not selected",s="Privacy policy not checked",u={checkEmailValidity:function(e){return/\S+@\S+/.test(e)},disableFormFields:function(e){for(var t=e.querySelectorAll("input, button, select"),r=0;r<t.length;r++)t[r].disabled=!0},enableFormFields:function(e){for(var t=e.querySelectorAll("input, button, select"),r=0;r<t.length;r++)t[r].disabled=!1},clearFormErrors:function(e){var t=e.querySelectorAll(".mzp-c-form-errors li");e.querySelector(".mzp-c-form-errors").classList.add("hidden");for(var r=0;r<t.length;r++)t[r].classList.add("hidden")},handleFormError:function(e){var t;switch(u.enableFormFields(r),r.querySelector(".mzp-c-form-errors").classList.remove("hidden"),e){case n:t=r.querySelector(".error-email-invalid");break;case a:r.querySelector(".error-newsletter-checkbox").classList.remove("hidden");break;case o:t=r.querySelector(".error-select-country");break;case c:t=r.querySelector(".error-select-language");break;case s:t=r.querySelector(".error-privacy-policy");break;case l:t=r.querySelector(".error-terms");break;default:t=r.querySelector(".error-try-again-later")}t&&t.classList.remove("hidden"),"function"==typeof u.customErrorCallback&&u.customErrorCallback(e)},handleFormSuccess:function(){r.classList.add("hidden"),document.getElementById("newsletter-thanks").classList.remove("hidden"),"function"==typeof u.customSuccessCallback&&u.customSuccessCallback()},postToBasket:function(e,r,o,n,c){var l=new XMLHttpRequest;"success@example.com"!==e?"failure@example.com"!==e?(l.onload=function(e){var r=e.target.response||e.target.responseText;"object"!==t(r)&&(r=JSON.parse(r)),r?"ok"===r.status&&e.target.status>=200&&e.target.status<300?n():"error"===r.status&&r.desc?c(r.desc):c():c()},l.onerror=c,l.open("POST",o,!0),l.setRequestHeader("Content-type","application/x-www-form-urlencoded"),l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.timeout=5e3,l.ontimeout=c,l.responseType="json",l.send(r)):c():n()},serialize:function(){var e=encodeURIComponent(r.querySelector('input[type="email"]').value),t=r.querySelector('select[name="country"]'),o=t?"&country=".concat(t.value):"",n=r.querySelector("#id_lang").value,c=Array.from(r.querySelectorAll('input[name="newsletters"]:checked')).map((function(e){return"".concat(e.value)})).join(",");c=encodeURIComponent(c);var l=encodeURIComponent(r.querySelector('input[name="source_url"]').value);return"email=".concat(e).concat(o,"&lang=").concat(n,"&source_url=").concat(l,"&newsletters=").concat(c)},validateFields:function(){var e=r.querySelector('input[type="email"]').value,t=!!r.querySelector('input[name="privacy"]:checked'),i=r.querySelectorAll('input[name="newsletters"]:checked'),d=r.querySelector('select[name="country"]'),m=r.querySelector("#id_lang").value,p=r.querySelector('input[name="terms"]');return u.checkEmailValidity(e)?d&&!d.value?(u.handleFormError(o),!1):m?0===i.length?(u.handleFormError(a),!1):t?!(p&&!p.checked&&(u.handleFormError(l),1)):(u.handleFormError(s),!1):(u.handleFormError(c),!1):(u.handleFormError(n),!1)},subscribe:function(e){var t=r.getAttribute("action"),o=r.querySelector('input[type="email"]').value;if(e.preventDefault(),e.stopPropagation(),u.disableFormFields(r),u.clearFormErrors(r),u.validateFields()){var n=u.serialize();u.postToBasket(o,n,t,u.handleFormSuccess,u.handleFormError)}},init:function(e,t){var o,n,c,l;function a(){l||(n.style.display="block",l=!0)}(r=document.getElementById("newsletter-form"))&&(o=document.getElementById("newsletter-submit"),n=document.getElementById("newsletter-details"),c=document.querySelector(".mzp-js-email-field"),l="none"!==window.getComputedStyle(n).display,c.addEventListener("focus",(function(){a()}),!1),o.addEventListener("click",(function(e){l||(e.preventDefault(),a())}),!1),r.addEventListener("submit",(function(e){l||(e.preventDefault(),a())}),!1),r.addEventListener("submit",u.subscribe,!1),"function"==typeof e&&(u.customSuccessCallback=e),"function"==typeof t&&(u.customErrorCallback=t))}};e.exports=u}},t={},function r(o){var n=t[o];if(void 0!==n)return n.exports;var c=t[o]={exports:{}};return e[o](c,c.exports,r),c.exports}(287);var e,t}));