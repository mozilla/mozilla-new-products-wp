{% set signup = options.email_signup %}

{% if options.include_email_signup %}
<section id="email-signup" class="grid grid-site gap-y-12 mt-32 md:mt-48 isolate">
  <h2 class="sr-only">Email Sign-up</h2>

  <div class="col-span-full type-headline-lg text-xl leading-tight prose mx-auto max-w-2xl text-center">
    {{ signup.prompt }}
  </div>

  {% if signup.graphic %}
  <div class="relative col-span-full grid grid-cols-[subgrid] grid-rows-[auto_1fr]">
    <form
      id="newsletter-form"
      class="mzp-c-newsletter-form mt-[10%] md:mt-[12.5%] row-start-1 row-end-2 col-start-1 col-end-7 md:col-start-4 md:col-end-10 3xl:col-start-5 3xl:col-end-9 z-20"
      method="post"
      {# action="https://basket.mozilla.org/news/subscribe/" #}
    >
      <!-- The value for the source_url field below should match the URL of your page where the newsletter form appears-->
      <input type="hidden" name="source_url" value="{{ current_url }}">

      <fieldset class="mzp-c-newsletter-content">
        <div class="mzp-c-form-errors hidden" id="newsletter-errors">
          <ul class="mzp-u-list-styled">
            <li class="error-email-invalid hidden">
              Please enter a valid email address
            </li>
            <li class="error-newsletter-checkbox hidden">
              Please check at least one of the newsletter options.
            </li>
            <li class="error-privacy-policy hidden">
              You must agree to the privacy notice
            </li>
            <li class="error-try-again-later hidden">
              We are sorry, but there was a problem with our system. Please try again later!
            </li>
          </ul>
        </div>

        <div class="p-3 pl-5 bg-black/60 backdrop-blur-md text-white flex justify-between items-center gap-2">
          <label class="sr-only" for="id_email">Your email address</label>

          <input
            id="id_email"
            class="mzp-js-email-field bg-transparent flex-1 py-1 font-headline font-wdth-380 font-semibold outline-none text-sm placeholder:text-white"
            type="email"
            name="email"
            required=""
            maxlength="320"
            placeholder="Enter Your Email"
          >

          <button type="submit" class="mzp-c-button group w-fit flex gap-2 cursor-pointer" id="newsletter-submit">
            <span class="w-fit button button-sm group-hocus:bg-black">
              {{ signup.cta }}
            </span>

            <svg class="button button-square p-2 transition-all group-hocus:bg-black" aria-hidden="true">
              <use href="#arrow-right" />
            </svg>
          </button>
        </div>

        <!-- <div id="newsletter-details" class="mzp-c-newsletter-details">
          <fieldset class="mzp-u-inline">
            <legend>I want information about:</legend>
            <p>
              <label for="id_newsletters_0" class="mzp-u-inline">
                <input type="checkbox" name="newsletters" value="mozilla-foundation" id="id_newsletters_0" checked> Mozilla
                Foundation
              </label>

              <label for="id_newsletters_1" class="mzp-u-inline">
                <input type="checkbox" name="newsletters" value="mozilla-and-you" id="id_newsletters_1" checked> Firefox
              </label>
            </p>
          </fieldset>

          <p>
            <label for="privacy" class="mzp-u-inline">
              <input type="checkbox" id="privacy" name="privacy" required aria-required="true">
              Iâ€™m okay with Mozilla handling my info as explained in <a
                href="https://www.mozilla.org/privacy/websites/">this Privacy Notice</a>
            </label>
          </p>
        </div> -->
      </fieldset>
    </form>

    <div class="col-start-1 col-end-7 md:col-start-2 md:col-end-12 row-span-full">
      {% include "components/lazy-img.twig" with {
        img: get_image(signup.graphic),
        decorative: true
      } %}

      <div class="absolute inset-0 top-1/2 bg-gradient-to-t from-main to-transparent z-10"></div>
    </div>
  </div>
  {% endif %}
</section>
{% endif %}
